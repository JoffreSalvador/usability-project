<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video Game ‚Äì EnglishMaster</title>

    <link rel="stylesheet" href="../assets/css/dashboard.css" />
    <link rel="stylesheet" href="../assets/css/games.css" />
    <link rel="stylesheet" href="../assets/css/video-game.css" />
</head>

<body>
    <header class="site-header">
            <div class="container">
                <div class="left">
                    <a href="dashboard.html" class="logo">
                        <!-- Alt text mejorado para ser m√°s descriptivo -->
                        <img src="../assets/img/logo.png" alt="EnglishMaster Logo" />
                    </a>
                </div>

                <div class="center">
                    <!-- Nav con aria-label para clarificar el prop√≥sito a los lectores de pantalla -->
                    <nav aria-label="Main Navigation">
                        <ul class="nav-list">
                            <li><a href="features.html">Features</a></li>
                            <li><a href="games.html">Games</a></li>
                            <li><a href="about.html">About</a></li>
                        </ul>
                    </nav>
                </div>

                <div class="right auth-buttons" id="authArea" style="opacity: 0; transition: opacity 0.3s ease-in-out;">
                    <a href="login.html" class="btn-outline" id="signInBtn">Sign In</a>
                    <a href="register.html" class="btn-filled" id="getStartedBtn">Get Started</a>

                    <div id="userInfo" style="display: none;">
                        <span id="userName" class="text-lg font-semibold mr-2"></span>
                        <button id="logoutBtn" class="btn-outline">Logout</button>
                    </div>
                </div>
            </div>
        </header>

    <main class="video-game-main">
        <div id="tutorial-screen" class="screen active">
            <div class="tutorial-container">
                <div class="tutorial-header">
                    <div class="game-badge">
                        <div class="game-icon-large">üé¨</div><span>Video Game</span>
                    </div>
                    <button class="skip-tutorial-btn" onclick="skipTutorial()">Skip Tutorial</button>
                </div>
                <div class="tutorial-content">
                    <div class="tutorial-step active" data-step="1">
                        <div class="tutorial-icon">üé¨</div>
                        <h2>Welcome to the Video Game!</h2>
                        <p>Sharpen your comprehension by watching engaging videos and answering questions.</p>
                        <div class="tutorial-dots"><span class="dot active"></span><span class="dot"></span><span
                                class="dot"></span><span class="dot"></span></div>
                        <button class="btn-filled tutorial-next" onclick="nextTutorial()">Next</button>
                    </div>
                    <div class="tutorial-step" data-step="2">
                        <div class="tutorial-icon">üß†</div>
                        <h2>Enhance Your Visual Learning</h2>
                        <p>This game tests your ability to understand context, details, and implied meanings from video
                            content.</p>
                        <div class="tutorial-benefits">
                            <div class="benefit-item">Improve real-world comprehension</div>
                            <div class="benefit-item">Connect visual cues with language</div>
                        </div>
                        <div class="tutorial-dots"><span class="dot"></span><span class="dot"></span><span
                                class="dot"></span><span class="dot"></span></div>
                        <div class="tutorial-nav"><button class="btn-outline tutorial-prev"
                                onclick="prevTutorial()">Previous</button><button class="btn-filled tutorial-next"
                                onclick="nextTutorial()">Next</button></div>
                    </div>
                    <div class="tutorial-step" data-step="3">
                        <div class="tutorial-icon">üí°</div>
                        <h2>Tips for Success</h2>
                        <p>Follow these tips to get the most out of your game experience.</p>
                        <div class="tips-list">
                            <div class="tip-item"><span class="tip-icon">üì∫</span>
                                <div class="tip-content">
                                    <h4>Watch Actively</h4>
                                    <p>Pay attention to expressions, settings, and actions.</p>
                                </div>
                            </div>
                            <div class="tip-item"><span class="tip-icon">üîç</span>
                                <div class="tip-content">
                                    <h4>Focus on Details</h4>
                                    <p>The questions may be about small details you might have missed.</p>
                                </div>
                            </div>
                            <div class="tip-item"><span class="tip-icon">üîÑ</span>
                                <div class="tip-content">
                                    <h4>Re-watch if Needed</h4>
                                    <p>Feel free to pause or re-watch the video to confirm your understanding.</p>
                                </div>
                            </div>
                        </div>
                        <div class="tutorial-dots"><span class="dot"></span><span class="dot"></span><span
                                class="dot"></span><span class="dot"></span></div>
                        <div class="tutorial-nav"><button class="btn-outline tutorial-prev"
                                onclick="prevTutorial()">Previous</button><button class="btn-filled tutorial-next"
                                onclick="nextTutorial()">Next</button></div>
                    </div>
                    <div class="tutorial-step" data-step="4">
                        <div class="tutorial-icon">‚úÖ</div>
                        <h2>Ready to Start!</h2>
                        <p>You're all set to begin your video comprehension challenge!</p>
                        <div class="ready-message">
                            <div class="ready-icon">üëç</div>
                            <h3>You're Ready to Play!</h3>
                            <p>Focus, watch carefully, and show off your comprehension skills!</p>
                        </div>
                        <div class="tutorial-dots"><span class="dot"></span><span class="dot"></span><span
                                class="dot"></span><span class="dot"></span></div>
                        <div class="tutorial-nav"><button class="btn-outline tutorial-prev"
                                onclick="prevTutorial()">Previous</button><button class="btn-filled start-playing"
                                onclick="showRules()">Start Playing Now! ‚Üí</button></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="rules-screen" class="screen">
            <div class="rules-container">
                <div class="rules-header"><button class="back-btn" onclick="showTutorial()">‚Üê Back to Tutorial</button>
                    <div class="game-badge">
                        <div class="game-icon-large">üé¨</div><span>Video Game</span>
                    </div>
                </div>
                <div class="rules-content">
                    <h2>Video Challenge</h2>
                    <p class="rules-subtitle">Watch a video and answer 10 questions to test your understanding.</p>
                    <div class="game-stats">
                        <div class="stat-item">
                            <div class="stat-number">30</div>
                            <div class="stat-label">Minutes</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">10</div>
                            <div class="stat-label">Questions</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">100</div>
                            <div class="stat-label">Max Points</div>
                        </div>
                    </div>
                    <div class="game-rules">
                        <h3>Game Rules:</h3>
                        <ul class="rules-list">
                            <li>You have 30 minutes to complete the challenge.</li>
                            <li>Answer all 10 multiple-choice questions.</li>
                            <li>Earn 10 points for each correct answer.</li>
                            <li>You must answer all questions to submit.</li>
                        </ul>
                    </div>
                    <button class="btn-filled start-game-btn" onclick="startGame()">Start Game ‚Üí</button>
                </div>
            </div>
        </div>

        <div id="game-screen" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <div class="game-info">
                        <div class="game-badge-small">üé¨<span>Video Challenge</span></div>
                    </div>
                    <div class="game-stats-header">
                        <div class="score-display">Score: <span id="current-score">0</span></div>
                        <div class="timer-display">‚è±Ô∏è<span id="timer">30:00</span></div>
                    </div>
                </div>

                <section class="video-container" aria-label="Main Video Content">
                    <iframe src="https://www.youtube.com/embed/arj7oStGLkU"
                        title="YouTube video: Inside the mind of a master procrastinator by Tim Urban" frameborder="0"
                        allowfullscreen></iframe>
                </section>
                
                <button id="transcript-btn" class="btn-outline transcript-btn">Show Transcript</button>

                <form id="quiz-form" aria-labelledby="quiz-heading">
                    <h2 id="quiz-heading" class="visually-hidden">Comprehension Questions</h2>
                    <section id="questions-container" aria-live="polite"></section>
                    <button type="submit" class="btn btn-filled" id="submit-btn">Check Answers</button>
                </form>
            </div>
        </div>

        <div id="complete-screen" class="screen">
            <div class="complete-container">
                <div class="complete-header"><button class="back-btn" onclick="playAgain()">‚Üê Back to Tutorial</button>
                    <div class="game-badge">
                        <div class="game-icon-large">üé¨</div><span>Game Complete</span>
                    </div>
                </div>
                <div class="complete-content">
                    <div class="achievement-icon" aria-hidden="true">üéØ</div>
                    <h2>Keep Learning!</h2>
                    <p class="complete-subtitle">You completed the video challenge!</p>
                    <div class="final-stats">
                        <div class="final-stat">
                            <div class="stat-number" id="final-score">0</div>
                            <div class="stat-label">Final Score</div>
                        </div>
                        <div class="final-stat">
                            <div class="stat-number" id="final-accuracy">0%</div>
                            <div class="stat-label">Accuracy</div>
                        </div>
                        <div class="final-stat">
                            <div class="stat-number" id="final-correct">0/10</div>
                            <div class="stat-label">Correct</div>
                        </div>
                    </div>
                    <div class="performance-summary">
                        <h3>Performance Summary</h3>
                        <div class="performance-list" id="performance-list"></div>
                    </div>
                    <div class="complete-actions">
                        <button class="btn-outline play-again-btn" onclick="playAgain()">üîÑ Play Again</button>
                        <a href="games.html" class="btn-filled dashboard-btn">üìä Back to Games</a>
                    </div>
                </div>
            </div>
        </div>

        <div id="alert-modal" class="alert-modal-overlay">
            <div class="alert-modal-content" role="alertdialog" aria-labelledby="modal-title" aria-describedby="modal-text">
                <h3 id="modal-title"></h3>
                <p id="modal-text"></p>
                <button id="alert-ok-btn" class="btn-filled">OK</button>
            </div>
        </div>

        <div id="transcript-modal" class="alert-modal-overlay">
            <div class="alert-modal-content transcript-modal-content" role="dialog"
                aria-labelledby="transcript-title">
                <div class="transcript-header">
                    <h3 id="transcript-title">Video Transcript</h3>
                    <button id="transcript-close-btn" class="close-btn" aria-label="Close transcript">&times;</button>
                </div>
                <div id="transcript-text" class="transcript-text-container">
                    <!-- El texto de la transcripci√≥n se cargar√° aqu√≠ -->
                </div>
            </div>
        </div>
    </main>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
    <script src="../utils/auth-ui.js"></script>
    <script src="../games/video-game/video-game.js"></script>
</body>

</html>